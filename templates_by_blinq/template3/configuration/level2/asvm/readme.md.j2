# Azure Subscription Vending Machine (asvm)

```bash
# login a with a user member of the caf-platform-maintainers group
rover login -t {{ ignite.global.onmicrosoft_domain }} \

cd /tf/caf/landingzones
git fetch origin
git checkout blinq-5.6.4

rover \
{% if "not deployed" not in ignite.global.cred_keyvaults.cred_subscription_creation_landingzones %}
  --impersonate-sp-from-keyvault-url https://{{ ignite.global.cred_keyvaults.cred_subscription_creation_landingzones }}.vault.azure.net \
{% endif %}
  -lz /tf/caf/landingzones/caf_solution \
  -var-folder {{ ignite.global.folders.configuration_folder }}/level2/asvm \
  -tfstate_subscription_id {{ ignite.global.subscriptions.sub_management }} \
  -target_subscription {{ ignite.global.subscriptions.sub_management }} \
  -tfstate asvm_subscription_vending_machine.tfstate \
  -env {{ ignite.global.caf_environment }} \
  -level level2 \
  -p ${TF_DATA_DIR}/asvm_subscription_vending_machine.tfstate.tfplan \
  -a plan

```

